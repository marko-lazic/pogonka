<div class="flex flex-col gap-6">
    <h1 class="text-3xl font-bold mb-2">Orders</h1>
    <p class="text-base-content opacity-70 mb-4">Manage your orders in <span class="font-semibold">Pogonka</span>!</p>

    <!-- Create New Order Button -->
    <div class="flex justify-end">
        <a href="/orders/create" class="btn btn-primary">
            Create New Order
        </a>
    </div>

    <!-- Order List -->
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h2 class="card-title">Order List</h2>

            {{#if orders.length}}
                <div class="overflow-x-auto">
                    <table class="table table-zebra">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Customer</th>
                                <th>Status</th>
                                <th>Created At</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#each orders}}
                                <tr>
                                    <td>
                                        <a href="/orders/{{this.id}}" class="link link-hover font-medium">
                                            {{this.id}}
                                        </a>
                                    </td>
                                    <td>
                                        <div class="font-medium">{{this.customerInfo.name}}</div>
                                        <div class="text-sm opacity-70">{{this.customerInfo.email}}</div>
                                        <div class="text-sm opacity-70">VAT: {{this.customerInfo.taxNumber}}</div>
                                    </td>
                                    <td>
                                        <div class="badge 
                                            {{#if (eq this.status 'Created')}}badge-neutral{{/if}}
                                            {{#if (eq this.status 'Confirmed')}}badge-primary{{/if}}
                                            {{#if (eq this.status 'Canceled')}}badge-error{{/if}}
                                            {{#if (eq this.status 'Payment of Avans')}}badge-success{{/if}}
                                            {{#if (eq this.status 'Production and Packaging')}}badge-warning{{/if}}
                                            {{#if (eq this.status 'Delivery')}}badge-secondary{{/if}}
                                            {{#if (eq this.status 'Project Billing')}}badge-info{{/if}}">
                                            {{this.status}}
                                        </div>
                                    </td>
                                    <td>
                                        {{formatDate this.createdAt}}
                                    </td>
                                    <td>
                                        <div class="dropdown dropdown-end">
                                            <div tabindex="0" role="button" class="btn btn-sm btn-ghost">
                                                Actions
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                                                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                                                </svg>
                                            </div>
                                            <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-100 rounded-box w-52">
                                                {{#each this._links}}
                                                    {{#if (ne this.rel 'self')}}
                                                        {{#if (ne this.rel 'update')}}
                                                            {{#if (ne this.rel 'delete')}}
                                                                <li>
                                                                    <button 
                                                                        hx-post="{{this.href}}"
                                                                        hx-target="body"
                                                                        hx-swap="outerHTML">
                                                                        {{capitalize this.rel}}
                                                                    </button>
                                                                </li>
                                                            {{/if}}
                                                        {{/if}}
                                                    {{/if}}
                                                {{/each}}
                                                <li>
                                                    <button 
                                                        class="text-error"
                                                        hx-delete="/orders/{{this.id}}"
                                                        hx-confirm="Are you sure you want to delete this order?"
                                                        hx-target="body"
                                                        hx-swap="outerHTML">
                                                        Delete
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>
                                    </td>
                                </tr>
                            {{/each}}
                        </tbody>
                    </table>
                </div>
            {{else}}
                <div class="alert">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-info shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <span>No orders found. Create your first order using the button above!</span>
                </div>
            {{/if}}
        </div>
    </div>
</div>
